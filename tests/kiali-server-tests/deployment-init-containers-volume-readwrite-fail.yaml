name: "deployment_init_containers_volume_readwrite_fail"
description: "Verify read-write secret volume mounts are rejected for initContainers"
helm_args:
  - "--set"
  - "deployment.additional_pod_init_containers_yaml[0].name=volume-fail"
  - "--set"
  - "deployment.additional_pod_init_containers_yaml[0].image=registry.access.redhat.com/ubi9/ubi-minimal:latest"
  - "--set"
  - "deployment.additional_pod_init_containers_yaml[0].command[0]=echo"
  - "--set"
  - "deployment.additional_pod_init_containers_yaml[0].command[1]=test"
  - "--set"
  - "deployment.additional_pod_init_containers_yaml[0].volumeMounts[0].name=kiali-secret"
  - "--set"
  - "deployment.additional_pod_init_containers_yaml[0].volumeMounts[0].mountPath=/test-secret"
  - "--set"
  - "deployment.additional_pod_init_containers_yaml[0].volumeMounts[0].readOnly=false"
yq_query: ""
expected_result: ""
should_fail: true
expected_error_pattern: "cannot mount secret-backed volume"
