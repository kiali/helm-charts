name: "deployment_secret_name"
description: "Verify custom secret name is used"
helm_args:
  - "--set"
  - "deployment.secret_name=my-custom-kiali-secret"
yq_query: "select(.kind == \"Deployment\") | .spec.template.spec.volumes | map(select(.name | contains(\"secret\"))) | .[0].secret.secretName"
expected_result: |
  my-custom-kiali-secret
should_fail: false
