name: "hpa_removes_replicas"
description: "Verify deployment replicas field is omitted when HPA is configured"
helm_args:
  - "--set"
  - "deployment.replicas=5"
  - "--set"
  - "deployment.hpa.spec.minReplicas=2"
  - "--set"
  - "deployment.hpa.spec.maxReplicas=10"
yq_query: "select(.kind == \"Deployment\") | .spec | has(\"replicas\")"
expected_result: |
  false
should_fail: false
