name: "deployment_tolerations"
description: "Verify tolerations configuration"
helm_args:
  - "--set"
  - "deployment.tolerations[0].key=taint-key"
  - "--set"
  - "deployment.tolerations[0].operator=Equal"
  - "--set"
  - "deployment.tolerations[0].value=taint-value"
  - "--set"
  - "deployment.tolerations[0].effect=NoSchedule"
yq_query: "select(.kind == \"Deployment\") | .spec.template.spec.tolerations"
expected_result: |
  - effect: NoSchedule
    key: taint-key
    operator: Equal
    value: taint-value
should_fail: false
